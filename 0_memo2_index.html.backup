<!-- memo2_index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Jay 캘린더</title>
  <link rel="stylesheet" href="memo2_style.css?v=202512081840">
  <link rel="stylesheet" href="memo2_style_patch.css?v=202512081840">
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="sidebar__title">위젯 <span class="ver">v0.8.2</span></div>
      <button id="themeToggle" class="menu-btn" style="margin-bottom:16px;">🌓 다크모드</button>
      <button class="menu-btn" data-widget="calendar">📅 달력</button>
      <button class="menu-btn" data-widget="memo">📝 메모</button>
      <button class="menu-btn" data-widget="todo">✅ ToDo</button>
      <button class="menu-btn" data-widget="timer">⏲️ 타이머</button>
      <button class="menu-btn" data-widget="alarm">⏰ 알람</button>
      <button class="menu-btn" data-widget="stopwatch">⏱️ 스탑워치</button>
      <p class="sidebar__hint">※ 버튼 클릭하면 위젯창이 열립니다.<br>위젯을 끌어서 이동 가능합니다.</p>
    </aside>

    <main class="main">
      <div class="card">
        <div class="card__header">
          <div class="card__title" id="headerYmLabel">🗓 2025년 12월</div>
          <div class="card__actions">
            <button id="todayBtn" class="btn small">오늘</button>
            <button id="prevMonth" class="icon-btn">◀</button>
            <button id="nextMonth" class="icon-btn">▶</button>
          </div>
        </div>



        <!-- 이달의 목표 -->
        <div class="goal-container">
          <div class="monthly-goal-single">
            <input type="text" id="monthlyGoalInput" class="monthly-goal-input-single" placeholder="이달의 목표를 입력하고 Enter">
            <button id="monthlyGoalMenuBtn" class="goal-menu-btn">⋮</button>
          </div>
        </div>

        <div class="calendar-wrapper" id="calendarWrapper">
          <div class="calendar" id="mainCalendar">
          <div class="calendar__weekdays">
            <span>일</span><span>월</span><span>화</span><span>수</span><span>목</span><span>금</span><span>토</span>
          </div>
          <div id="calendarGrid" class="calendar__grid"></div>
        </div>
        </div>

        <!-- 사용법 설명 섹션 -->
        <div id="usageSection" class="usage-section">
          <div class="usage-content">
            <h3 class="usage-title">사용법</h3>
            <div id="usageText" class="usage-text"></div>
          </div>
        </div>
      </div>
    </main>

    <aside class="right">
      <!-- 일정 동록 (To-Do) 통합 섹션 -->
      <div class="card">
        <div class="card__header"><div class="card__title">📅 일정 동록 (To-Do)</div></div>
        <div class="datebox">
          <div id="selectedDateText" class="datebox__date">2025-12-12</div>
          
          <!-- 할 일 입력 -->
          <div class="todo__input-group">
            <input id="todoInput" type="text" placeholder="할 일을 입력하고 Enter">
            <button id="todoAddBtn" class="icon-btn" title="추가">➕</button>
            <button id="todoColorBtn" class="icon-btn" title="색상">⚪</button>
            <button id="todoEmojiBtn" class="icon-btn" title="이모티콘">☺️</button>
          </div>
          
          <!-- 날짜 범위 -->
          <div class="event-datetime-row">
            <div class="event-date-group">
              <label>시작:</label>
              <input id="todoStartDate" type="date">
            </div>
            <div class="event-date-group">
              <label>종료:</label>
              <input id="todoEndDate" type="date">
            </div>
          </div>
          
          <!-- 시간 및 옵션 -->
          <div class="event-time-row">
            <div class="event-time-group">
              <label>시간:</label>
              <input id="eventTime" type="time">
            </div>
            <div class="event-options">
              <label class="event-option"><input id="eventAlarm" type="checkbox"> 알림</label>
              <button id="eventRepeatBtn" class="repeat-btn" type="button">반복 안 함</button>
            </div>
          </div>
          
          <!-- 할 일 리스트 -->
          <ul id="todoList" class="todo__list"></ul>
        </div>
      </div>

      <!-- 메모 섹션 -->
      <div class="card">
        <div class="card__header"><div class="card__title">⎙ 메모</div></div>
        <div class="datebox">
          <div class="memo__header">
            <label class="memo__datepick">날짜: <input id="memoDate" type="date"></label>
          </div>
          <div class="memo__add">
            <textarea id="memoInput" rows="3" placeholder="메모를 입력하세요 (Enter=줄바꿈, '저장'으로 추가)"></textarea>
            <button id="memoAddBtn" class="btn">저장</button>
          </div>
          <ul id="memoList" class="memo__list"></ul>
        </div>
      </div>
    </aside>
  </div>

  <div id="widgetHost" class="widget-host" aria-live="polite"></div>

  <script src="memo2_app.js?v=202512081840"></script>
  <script>
    // 버튼 이벤트 강제 등록
    setTimeout(() => {
      const addBtn = document.getElementById('todoAddBtn');
      const colorBtn = document.getElementById('todoColorBtn');
      const emojiBtn = document.getElementById('todoEmojiBtn');
      
      if(addBtn && typeof addTodoFromInput === 'function') {
        addBtn.onclick = () => addTodoFromInput();
        console.log('✅ 추가 버튼 등록됨');
      }
      
      if(colorBtn && typeof showPalette === 'function') {
        colorBtn.onclick = () => {
          showPalette(colorBtn, (c) => {
            ST.eventColor = c;
            if(c === 'rainbow') {
              colorBtn.style.setProperty('--selected-color', 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)');
              colorBtn.style.color = '#667eea';
            } else if(c) {
              colorBtn.style.setProperty('--selected-color', c);
              colorBtn.style.color = c;
            } else {
              colorBtn.style.setProperty('--selected-color', 'transparent');
              colorBtn.style.color = '#64748b';
            }
          });
        };
        console.log('✅ 색상 버튼 등록됨');
      }
      
      if(emojiBtn && typeof showEmojiPicker === 'function') {
        emojiBtn.onclick = () => {
          showEmojiPicker(emojiBtn, (emoji) => {
            ST.eventEmoji = emoji;
            emojiBtn.textContent = emoji || '☺️';
            emojiBtn.style.filter = 'none';
            emojiBtn.style.opacity = '1';
          });
        };
        console.log('✅ 이모티콘 버튼 등록됨');
      }
    }, 100);
  </script>
</body>
</html>

